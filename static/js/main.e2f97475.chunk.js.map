{"version":3,"sources":["components/TypingIndicator/index.module.css","components/JoinRoomScreen/index.module.css","components/WelcomeScreen/index.module.css","components/CreateRoomForm/index.module.css","components/RoomHeader/index.module.css","components/RoomList/index.module.css","components/FileInput/index.module.css","components/CreateMessageForm/index.module.css","components/UserHeader/index.module.css","components/UserHeader/index.js","components/UserList/index.js","components/Message/index.js","components/MessageList/index.js","components/TypingIndicator/index.js","components/FileInput/index.js","components/CreateMessageForm/index.js","components/RoomList/index.js","components/RoomHeader/index.js","components/CreateRoomForm/index.js","components/WelcomeScreen/index.js","components/JoinRoomScreen/index.js","chatkit.js","index.js","components/Message/index.module.css","components/MessageList/index.module.css","components/UserList/index.module.css"],"names":["module","exports","component","dots","ball-beat","pulse","UserHeader_UserHeader","_ref","_ref$user","user","react_default","a","createElement","className","index_module_default","src","avatarURL","alt","name","id","concat","UserList_UserList","room","createConvo","current","removeUser","UserList_index_module_default","users","map","key","presence","state","online","onClick","e","style","order","Message_Attachment","_this","this","props","link","fetchAttachment","url","then","fetched","setState","file","image","controls","video","audio","href","download","type","Component","Message_Message","message","sender","Message_index_module_default","string","createdAt","date","Date","minutes","getMinutes","getHours","Linkify_default","properties","target","text","attachment","emptyList","MessageList_index_module_default","empty","role","aria-label","MessageList_MessageList","_ref$messages","messages","Object","keys","length","reverse","k","TypingIndicator_index_module_default","x","TypingIndicator_TypingIndicator","_ref$typing","typing","slice","join","FileInput_FileInput","_ref$state","xlinkHref","FileInput_index_module_default","onChange","files","sendMessage","roomId","replace","CreateMessageForm_CreateMessageForm","_ref$state$user","_ref$state$room","_ref$state$message","runCommand","actions","CreateMessageForm_index_module_default","onSubmit","preventDefault","value","startsWith","placeholder","onInput","isTypingIn","unreads","arguments","undefined","read","readCursor","filter","position","RoomList_RoomList","_ref$rooms","rooms","RoomList_index_module_default","messageKeys","latestMessage","pop","firstUser","find","unreadMessages","lastMessage","parseInt","priority","unreadCount","disabled","joinRoom","match","isPrivate","TypingIndicator_index_module","RoomHeader_RoomHeader","sidebarOpen","userListOpen","_ref$actions","setSidebar","setUserList","RoomHeader_index_module_default","CreateRoomForm_CreateRoomForm","submit","CreateRoomForm_index_module_default","private","elements","checked","WelcomeScreen_WelcomeScreen","WelcomeScreen_index_module_default","viewBox","d","JoinRoomScreen_JoinRoomScreen","JoinRoomScreen_index_module_default","instanceLocator","token","src_chatkit","_ref2","chatkit_default","ChatManager","tokenProvider","TokenProvider","userId","connect","onUserStartedTyping","isTyping","onUserStoppedTyping","notTyping","onAddedToRoom","subscribeToRoom","onRemovedFromRoom","removeRoom","onUserCameOnline","setUserPresence","onUserWentOffline","Promise","all","hooks","onNewMessage","addMessage","setUser","catch","error","console","log","src_View","window","innerWidth","setRoom","scrollToEnd","setCursor","roomSubscriptions","createRoom","options","exists","addUserIds","addUserToRoom","_ref$roomId","removeUserFromRoom","_ref2$roomId","leaveRoom","setReadCursor","forceUpdate","payload","messageId","object_path_immutable","showNotification","command","commands","invite","_ref3","_slicedToArray","remove","_ref5","leave","_ref7","split","args","exec","setTimeout","elem","document","querySelector","scrollTop","senderId","visibilityState","Notification","body","icon","addEventListener","focus","_this2","requestPermission","existingUser","JSON","parse","fetch","method","stringify","code","authCode","res","json","version","package_0","localStorage","setItem","history","replaceState","location","pathname","_this$state","_this$actions","data-open","getItem","clear","redirect","URLSearchParams","search","get","react_dom_default","render"],"mappings":"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","file":"static/js/main.e2f97475.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"TypingIndicator_component__zdrtY\",\"dots\":\"TypingIndicator_dots__A2ivj\",\"ball-beat\":\"TypingIndicator_ball-beat__3qu_F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"JoinRoomScreen_component__gcLWb\",\"pulse\":\"JoinRoomScreen_pulse__XQP3Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"WelcomeScreen_component__1pZYg\",\"pulse\":\"WelcomeScreen_pulse__35ZOZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateRoomForm_component__2Mqig\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomHeader_component__R62TZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomList_component__PTnnz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"FileInput_component__2QP_j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateMessageForm_component__gaMLX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserHeader_component__1eDXi\",\"pulse\":\"UserHeader_pulse__28saA\"};","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nconst placeholder =\r\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\r\n\r\nexport const UserHeader = ({ user = {} }) => (\r\n  <header className={style.component}>\r\n    <img src={user.avatarURL || placeholder} alt={user.name} />\r\n    <div>\r\n      <h3>{user.name}</h3>\r\n      <h5>{user.id && `@${user.id}`}</h5>\r\n    </div>\r\n  </header>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nexport const UserList = ({ room, current, createConvo, removeUser }) => (\r\n  <ul className={style.component}>\r\n    {room.users.map(user => (\r\n      <li\r\n        key={user.id}\r\n        className={user.presence.state === 'online' ? style.online : null}\r\n        onClick={e => createConvo({ user })}\r\n        style={{ order: user.presence.state === 'online' && -1 }}\r\n      >\r\n        <img src={user.avatarURL} alt={user.name} />\r\n        <p>{user.name}</p>\r\n      </li>\r\n    ))}\r\n  </ul>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\nimport Linkify from 'react-linkify'\r\n\r\nconst time = string => {\r\n  const date = new Date(string)\r\n  const minutes = date.getMinutes()\r\n  return `${date.getHours()}:${minutes < 10 ? '0' + minutes : minutes}`\r\n}\r\n\r\nclass Attachment extends React.Component {\r\n  componentDidMount() {\r\n    this.props.link &&\r\n      this.props.user\r\n        .fetchAttachment({ url: this.props.link })\r\n        .then(fetched =>\r\n          this.setState({ src: fetched.link, name: fetched.file.name })\r\n        )\r\n  }\r\n  render() {\r\n    return this.state\r\n      ? {\r\n          image: (\r\n            <img controls={true} src={this.state.src} alt={this.state.name} />\r\n          ),\r\n          video: <video controls={true} src={this.state.src} />,\r\n          audio: <audio controls={true} src={this.state.src} />,\r\n          file: (\r\n            <a href={this.state.src} download>\r\n              Download File\r\n            </a>\r\n          ),\r\n        }[this.props.type]\r\n      : null\r\n  }\r\n}\r\n\r\nexport const Message = ({ user, createConvo }) => message =>\r\n  message.sender ? (\r\n    <li key={message.id} className={style.component}>\r\n      <img\r\n        onClick={e => createConvo({ user: message.sender })}\r\n        src={message.sender.avatarURL}\r\n        alt={message.sender.name}\r\n      />\r\n      <div>\r\n        <span\r\n          className={\r\n            message.sender.id === user.id ||\r\n            (message.sender.presence &&\r\n              message.sender.presence.state === 'online')\r\n              ? style.online\r\n              : null\r\n          }\r\n        >{`${message.sender.name} | ${time(message.createdAt)}`}</span>\r\n        <p>\r\n          <Linkify properties={{ target: '_blank' }}>{message.text}</Linkify>\r\n        </p>\r\n        {message.attachment ? (\r\n          <Attachment\r\n            user={user}\r\n            link={message.attachment.link}\r\n            type={message.attachment.type}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    </li>\r\n  ) : null\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\nimport { Message } from '../Message'\r\n\r\nconst emptyList = (\r\n  <div className={style.empty}>\r\n    <span role=\"img\" aria-label=\"post\">\r\n      📝\r\n    </span>\r\n    <h2>No Messages Yet</h2>\r\n    <p>Be the first to post in this room or invite someone to join the room</p>\r\n  </div>\r\n)\r\n\r\nexport const MessageList = ({ messages = {}, user, createConvo }) => (\r\n  <ul id=\"messages\" className={style.component}>\r\n    {Object.keys(messages).length > 0 ? (\r\n      <wrapper->\r\n        {Object.keys(messages)\r\n          .reverse()\r\n          .map(k => Message({ user, createConvo })(messages[k]))}\r\n      </wrapper->\r\n    ) : (\r\n      emptyList\r\n    )}\r\n  </ul>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nconst dots = (\r\n  <div className={style.dots}>{[0, 1, 2].map(x => <div key={x} />)}</div>\r\n)\r\n\r\nexport const TypingIndicator = ({ typing = {} }) =>\r\n  Object.keys(typing).length ? (\r\n    <div className={style.component}>\r\n      <div>{dots}</div>\r\n      <div>{`${Object.keys(typing)\r\n        .slice(0, 2)\r\n        .join(' and ')} is typing`}</div>\r\n    </div>\r\n  ) : null\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nexport const FileInput = ({ state: { user, message, room } }) =>\r\n  room.id ? (\r\n    <button>\r\n      <svg>\r\n        <use xlinkHref=\"index.svg#attach\" />\r\n      </svg>\r\n      <input\r\n        className={style.component}\r\n        type=\"file\"\r\n        onChange={e => {\r\n          const file = e.target.files[0]\r\n          file &&\r\n            user.sendMessage({\r\n              text: message || file.name,\r\n              roomId: room.id,\r\n              attachment: {\r\n                name: file.name.replace(/[^A-Za-z0-9._-]/g, '--'),\r\n                file,\r\n              },\r\n            })\r\n        }}\r\n      />\r\n    </button>\r\n  ) : null\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\nimport { FileInput } from '../FileInput'\r\n\r\nexport const CreateMessageForm = ({\r\n  state: { user = {}, room = {}, message = '' },\r\n  actions: { runCommand },\r\n}) =>\r\n  room.id ? (\r\n    <form\r\n      className={style.component}\r\n      onSubmit={e => {\r\n        e.preventDefault()\r\n        const message = e.target[0].value\r\n        e.target[0].value = ''\r\n        message.startsWith('/')\r\n          ? runCommand(message.slice(1))\r\n          : message.length > 0 &&\r\n            user.sendMessage({\r\n              text: message,\r\n              roomId: room.id,\r\n            })\r\n      }}\r\n    >\r\n      <input\r\n        placeholder=\"Type a Message..\"\r\n        onInput={e => user.isTypingIn({ roomId: room.id })}\r\n      />\r\n      <FileInput state={{ user, room, message }} />\r\n      <button type=\"submit\">\r\n        <svg>\r\n          <use xlinkHref=\"index.svg#send\" />\r\n        </svg>\r\n      </button>\r\n    </form>\r\n  ) : null\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\nimport { dots } from '../TypingIndicator/index.module.css'\r\n\r\nconst Icon = id => (\r\n  <svg>\r\n    <use xlinkHref={`index.svg#${id}`} />\r\n  </svg>\r\n)\r\n\r\nconst unreads = (user, room, messages = {}) => {\r\n  const read = user.readCursor({ roomId: room.id })\r\n  return (\r\n    (read && Object.keys(messages).filter(x => x > read.position).length) ||\r\n    undefined\r\n  )\r\n}\r\n\r\nconst priority = (user, room, messages = {}) => {\r\n  const unreadMessages = unreads(user, room, messages) || 0\r\n  const lastMessage = Object.keys(messages).pop() || 0\r\n  return (10 * unreadMessages + parseInt(lastMessage)) * -1\r\n}\r\n\r\nexport const RoomList = ({\r\n  rooms = [],\r\n  user,\r\n  messages,\r\n  current,\r\n  typing,\r\n  actions,\r\n}) => (\r\n  <ul className={style.component}>\r\n    {rooms.map(room => {\r\n      const messageKeys = Object.keys(messages[room.id] || {})\r\n      const latestMessage =\r\n        messageKeys.length > 0 && messages[room.id][messageKeys.pop()]\r\n      const firstUser = room.users.find(x => x.id !== user.id)\r\n      const order = priority(user, room, messages[room.id])\r\n      const unreadCount = unreads(user, room, messages[room.id])\r\n      return (\r\n        <li\r\n          key={room.id}\r\n          disabled={room.id === current.id}\r\n          onClick={e => actions.joinRoom(room)}\r\n          style={{ order }}\r\n        >\r\n          {room.name.match(user.id) && firstUser ? (\r\n            <img src={firstUser.avatarURL} alt={firstUser.id} />\r\n          ) : (\r\n            Icon(room.isPrivate ? 'lock' : 'public')\r\n          )}\r\n          <col->\r\n            <p>{room.name.replace(user.id, '')}</p>\r\n            <span>{latestMessage && latestMessage.text}</span>\r\n          </col->\r\n          {room.id !== current.id && unreadCount ? (\r\n            <label>{unreadCount}</label>\r\n          ) : Object.keys(typing[room.id] || {}).length > 0 ? (\r\n            <div className={dots}>{[0, 1, 2].map(x => <div key={x} />)}</div>\r\n          ) : null}\r\n        </li>\r\n      )\r\n    })}\r\n  </ul>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nexport const RoomHeader = ({\r\n  state: { room, user, sidebarOpen, userListOpen },\r\n  actions: { setSidebar, setUserList },\r\n}) => (\r\n  <header className={style.component}>\r\n    <button onClick={e => setSidebar(!sidebarOpen)}>\r\n      <svg>\r\n        <use xlinkHref=\"index.svg#menu\" />\r\n      </svg>\r\n    </button>\r\n    <h1>{room.name && room.name.replace(user.id, '')}</h1>\r\n    {room.users && (\r\n      <div onClick={e => setUserList(!userListOpen)}>\r\n        <span>{room.users.length}</span>\r\n        <svg>\r\n          <use xlinkHref=\"index.svg#members\" />\r\n        </svg>\r\n      </div>\r\n    )}\r\n  </header>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nexport const CreateRoomForm = ({ submit }) => (\r\n  <form\r\n    className={style.component}\r\n    onSubmit={e => {\r\n      e.preventDefault()\r\n      submit({\r\n        name: e.target[0].value,\r\n        private: e.target.elements[2].checked,\r\n      })\r\n      e.target[0].value = ''\r\n    }}\r\n  >\r\n    <input placeholder=\"Create a Room\" />\r\n    <button>\r\n      <input type=\"checkbox\" />\r\n      <svg>\r\n        <use xlinkHref=\"index.svg#lock\" />\r\n      </svg>\r\n    </button>\r\n    <button type=\"submit\">\r\n      <svg>\r\n        <use xlinkHref=\"index.svg#add\" />\r\n      </svg>\r\n    </button>\r\n  </form>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nexport const WelcomeScreen = () => (\r\n  <section>\r\n    <div className={style.component}>\r\n      <span role=\"img\" aria-label=\"post\">\r\n        <svg viewBox=\"0 0 59 80\">\r\n          <g>\r\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\r\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\r\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\r\n          </g>\r\n        </svg>\r\n      </span>\r\n      <p>\r\n        Authenticating, subscribing to rooms<br />and fetching messages.\r\n      </p>\r\n    </div>\r\n  </section>\r\n)\r\n","import React from 'react'\r\nimport style from './index.module.css'\r\n\r\nexport const JoinRoomScreen = () => (\r\n  <section>\r\n    <div className={style.component}>\r\n      <span role=\"img\" aria-label=\"post\">\r\n        <svg viewBox=\"0 0 59 80\">\r\n          <g>\r\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\r\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\r\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\r\n          </g>\r\n        </svg>\r\n      </span>\r\n      <p>\r\n        Join a room, create a room or click on a user avatar and start a\r\n        conversation.\r\n      </p>\r\n    </div>\r\n  </section>\r\n)\r\n","import Chatkit from '@pusher/chatkit'\r\n\r\nconst credentials = {\r\n  url: (id, token) =>\r\n    `https://chatkit-demo-server.herokuapp.com/token?user=${id}&token=${token}`,\r\n  instanceLocator: 'v1:us1:05f46048-3763-4482-9cfe-51ff327c3f29',\r\n}\r\n\r\nconst { instanceLocator, url } = credentials\r\nexport default ({ state, actions }, { id, token }) =>\r\n  new Chatkit.ChatManager({\r\n    tokenProvider: new Chatkit.TokenProvider({ url: url(id, token) }),\r\n    instanceLocator,\r\n    userId: id,\r\n  })\r\n    .connect({\r\n      onUserStartedTyping: actions.isTyping,\r\n      onUserStoppedTyping: actions.notTyping,\r\n      onAddedToRoom: actions.subscribeToRoom,\r\n      onRemovedFromRoom: actions.removeRoom,\r\n      onUserCameOnline: actions.setUserPresence,\r\n      onUserWentOffline: actions.setUserPresence,\r\n    })\r\n    .then(user => {\r\n      // Subscribe to all rooms the user is a member of\r\n      Promise.all(\r\n        user.rooms.map(room =>\r\n          user.subscribeToRoom({\r\n            roomId: room.id,\r\n            hooks: { onNewMessage: actions.addMessage },\r\n          })\r\n        )\r\n      ).then(rooms => {\r\n        actions.setUser(user)\r\n        // Join the first room in the users room list\r\n        user.rooms.length > 0 && actions.joinRoom(user.rooms[0])\r\n      })\r\n    })\r\n    .catch(error => console.log('Error on connection', error))\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { set, del } from 'object-path-immutable'\r\nimport { version } from '../package.json'\r\nimport './index.css'\r\n\r\nimport { UserHeader } from './components/UserHeader'\r\nimport { UserList } from './components/UserList'\r\nimport { MessageList } from './components/MessageList'\r\nimport { TypingIndicator } from './components/TypingIndicator'\r\nimport { CreateMessageForm } from './components/CreateMessageForm'\r\nimport { RoomList } from './components/RoomList'\r\nimport { RoomHeader } from './components/RoomHeader'\r\nimport { CreateRoomForm } from './components/CreateRoomForm'\r\nimport { WelcomeScreen } from './components/WelcomeScreen'\r\nimport { JoinRoomScreen } from './components/JoinRoomScreen'\r\n\r\nimport ChatManager from './chatkit'\r\n\r\n// --------------------------------------\r\n// Application\r\n// --------------------------------------\r\n\r\nclass View extends React.Component {\r\n  state = {\r\n    user: {},\r\n    room: {},\r\n    messages: {},\r\n    typing: {},\r\n    sidebarOpen: false,\r\n    userListOpen: window.innerWidth > 1000,\r\n  }\r\n\r\n  actions = {\r\n    // --------------------------------------\r\n    // UI\r\n    // --------------------------------------\r\n\r\n    setSidebar: sidebarOpen => this.setState({ sidebarOpen }),\r\n    setUserList: userListOpen => this.setState({ userListOpen }),\r\n\r\n    // --------------------------------------\r\n    // User\r\n    // --------------------------------------\r\n\r\n    setUser: user => this.setState({ user }),\r\n\r\n    // --------------------------------------\r\n    // Room\r\n    // --------------------------------------\r\n\r\n    setRoom: room => {\r\n      this.setState({ room, sidebarOpen: false })\r\n      this.actions.scrollToEnd()\r\n    },\r\n\r\n    removeRoom: room => this.setState({ room: {} }),\r\n\r\n    joinRoom: room => {\r\n      this.actions.setRoom(room)\r\n      this.actions.subscribeToRoom(room)\r\n      this.state.messages[room.id] &&\r\n        this.actions.setCursor(\r\n          room.id,\r\n          Object.keys(this.state.messages[room.id]).pop()\r\n        )\r\n    },\r\n\r\n    subscribeToRoom: room =>\r\n      !this.state.user.roomSubscriptions[room.id] &&\r\n      this.state.user.subscribeToRoom({\r\n        roomId: room.id,\r\n        hooks: { onNewMessage: this.actions.addMessage },\r\n      }),\r\n\r\n    createRoom: options =>\r\n      this.state.user.createRoom(options).then(this.actions.joinRoom),\r\n\r\n    createConvo: options => {\r\n      if (options.user.id !== this.state.user.id) {\r\n        const exists = this.state.user.rooms.find(\r\n          x =>\r\n            x.name === options.user.id + this.state.user.id ||\r\n            x.name === this.state.user.id + options.user.id\r\n        )\r\n        exists\r\n          ? this.actions.joinRoom(exists)\r\n          : this.actions.createRoom({\r\n              name: this.state.user.id + options.user.id,\r\n              addUserIds: [options.user.id],\r\n              private: true,\r\n            })\r\n      }\r\n    },\r\n\r\n    addUserToRoom: ({ userId, roomId = this.state.room.id }) =>\r\n      this.state.user\r\n        .addUserToRoom({ userId, roomId })\r\n        .then(this.actions.setRoom),\r\n\r\n    removeUserFromRoom: ({ userId, roomId = this.state.room.id }) =>\r\n      userId === this.state.user.id\r\n        ? this.state.user.leaveRoom({ roomId })\r\n        : this.state.user\r\n            .removeUserFromRoom({ userId, roomId })\r\n            .then(this.actions.setRoom),\r\n\r\n    // --------------------------------------\r\n    // Cursors\r\n    // --------------------------------------\r\n\r\n    setCursor: (roomId, position) =>\r\n      this.state.user\r\n        .setReadCursor({ roomId, position: parseInt(position) })\r\n        .then(x => this.forceUpdate()),\r\n\r\n    // --------------------------------------\r\n    // Messages\r\n    // --------------------------------------\r\n\r\n    addMessage: payload => {\r\n      const roomId = payload.room.id\r\n      const messageId = payload.id\r\n      // Update local message cache with new message\r\n      this.setState(set(this.state, ['messages', roomId, messageId], payload))\r\n      // Update cursor if the message was read\r\n      if (roomId === this.state.room.id) {\r\n        const cursor = this.state.user.readCursor({ roomId }) || {}\r\n        const cursorPosition = cursor.position || 0\r\n        cursorPosition < messageId && this.actions.setCursor(roomId, messageId)\r\n        this.actions.scrollToEnd()\r\n      }\r\n      // Send notification\r\n      this.actions.showNotification(payload)\r\n    },\r\n\r\n    runCommand: command => {\r\n      const commands = {\r\n        invite: ([userId]) => this.actions.addUserToRoom({ userId }),\r\n        remove: ([userId]) => this.actions.removeUserFromRoom({ userId }),\r\n        leave: ([userId]) =>\r\n          this.actions.removeUserFromRoom({ userId: this.state.user.id }),\r\n      }\r\n      const name = command.split(' ')[0]\r\n      const args = command.split(' ').slice(1)\r\n      const exec = commands[name]\r\n      exec && exec(args).catch(console.log)\r\n    },\r\n\r\n    scrollToEnd: e =>\r\n      setTimeout(() => {\r\n        const elem = document.querySelector('#messages')\r\n        elem && (elem.scrollTop = 100000)\r\n      }, 0),\r\n\r\n    // --------------------------------------\r\n    // Typing Indicators\r\n    // --------------------------------------\r\n\r\n    isTyping: (room, user) =>\r\n      this.setState(set(this.state, ['typing', room.id, user.id], true)),\r\n\r\n    notTyping: (room, user) =>\r\n      this.setState(del(this.state, ['typing', room.id, user.id])),\r\n\r\n    // --------------------------------------\r\n    // Presence\r\n    // --------------------------------------\r\n\r\n    setUserPresence: () => this.forceUpdate(),\r\n\r\n    // --------------------------------------\r\n    // Notifications\r\n    // --------------------------------------\r\n\r\n    showNotification: message => {\r\n      if (\r\n        'Notification' in window &&\r\n        this.state.user.id &&\r\n        this.state.user.id !== message.senderId &&\r\n        document.visibilityState === 'hidden'\r\n      ) {\r\n        const notification = new Notification(\r\n          `New Message from ${message.sender.id}`,\r\n          {\r\n            body: message.text,\r\n            icon: message.sender.avatarURL,\r\n          }\r\n        )\r\n        notification.addEventListener('click', e => {\r\n          this.actions.joinRoom(message.room)\r\n          window.focus()\r\n        })\r\n      }\r\n    },\r\n  }\r\n\r\n  componentDidMount() {\r\n    'Notification' in window && Notification.requestPermission()\r\n    existingUser\r\n      ? ChatManager(this, JSON.parse(existingUser))\r\n      : fetch('https://chatkit-demo-server.herokuapp.com/auth', {\r\n          method: 'POST',\r\n          body: JSON.stringify({ code: authCode }),\r\n        })\r\n          .then(res => res.json())\r\n          .then(user => {\r\n            user.version = version\r\n            window.localStorage.setItem('chatkit-user', JSON.stringify(user))\r\n            window.history.replaceState(null, null, window.location.pathname)\r\n            ChatManager(this, user)\r\n          })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      room,\r\n      messages,\r\n      typing,\r\n      sidebarOpen,\r\n      userListOpen,\r\n    } = this.state\r\n    const { createRoom, createConvo, removeUserFromRoom } = this.actions\r\n\r\n    return (\r\n      <main>\r\n        <aside data-open={sidebarOpen}>\r\n          <UserHeader user={user} />\r\n          <RoomList\r\n            user={user}\r\n            rooms={user.rooms}\r\n            messages={messages}\r\n            typing={typing}\r\n            current={room}\r\n            actions={this.actions}\r\n          />\r\n          {user.id && <CreateRoomForm submit={createRoom} />}\r\n        </aside>\r\n        <section>\r\n          <RoomHeader state={this.state} actions={this.actions} />\r\n          {room.id ? (\r\n            <row->\r\n              <col->\r\n                <MessageList\r\n                  user={user}\r\n                  messages={messages[room.id]}\r\n                  createConvo={createConvo}\r\n                />\r\n                <TypingIndicator typing={typing[room.id]} />\r\n                <CreateMessageForm state={this.state} actions={this.actions} />\r\n              </col->\r\n              {userListOpen && (\r\n                <UserList\r\n                  room={room}\r\n                  current={user.id}\r\n                  createConvo={createConvo}\r\n                  removeUser={removeUserFromRoom}\r\n                />\r\n              )}\r\n            </row->\r\n          ) : user.id ? (\r\n            <JoinRoomScreen />\r\n          ) : (\r\n            <WelcomeScreen />\r\n          )}\r\n        </section>\r\n      </main>\r\n    )\r\n  }\r\n}\r\n\r\n// --------------------------------------\r\n// Authentication\r\n// --------------------------------------\r\n\r\nwindow.localStorage.getItem('chatkit-user') &&\r\n  !window.localStorage.getItem('chatkit-user').match(version) &&\r\n  window.localStorage.clear()\r\n\r\nconst params = new URLSearchParams(window.location.search.slice(1))\r\nconst authCode = params.get('code')\r\nconst existingUser = window.localStorage.getItem('chatkit-user')\r\n\r\nconst githubAuthRedirect = () => {\r\n  const client = '20cdd317000f92af12fe'\r\n  const url = 'https://github.com/login/oauth/authorize'\r\n  const server = 'https://chatkit-demo-server.herokuapp.com'\r\n  const redirect = `${server}/success?url=${window.location.href.split('?')[0]}`\r\n  window.location = `${url}?scope=user:email&client_id=${client}&redirect_uri=${redirect}`\r\n}\r\n\r\n!existingUser && !authCode\r\n  ? githubAuthRedirect()\r\n  : ReactDOM.render(<View />, document.querySelector('#root'))\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"Message_component__1BLUf\",\"online\":\"Message_online__2Xr9k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"MessageList_component__lPKK5\",\"empty\":\"MessageList_empty__2BGIh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserList_component__2afbN\",\"online\":\"UserList_online__ZOu3E\"};"],"sourceRoot":""}