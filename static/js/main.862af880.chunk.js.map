{"version":3,"sources":["components/TypingIndicator/index.module.css","components/JoinRoomScreen/index.module.css","components/WelcomeScreen/index.module.css","components/CreateRoomForm/index.module.css","components/RoomHeader/index.module.css","components/RoomList/index.module.css","components/FileInput/index.module.css","components/CreateMessageForm/index.module.css","components/UserHeader/index.module.css","components/UserHeader/index.js","components/UserList/index.js","components/Message/index.js","components/MessageList/index.js","components/TypingIndicator/index.js","components/FileInput/index.js","components/CreateMessageForm/index.js","components/RoomList/index.js","components/RoomHeader/index.js","components/CreateRoomForm/index.js","components/WelcomeScreen/index.js","components/JoinRoomScreen/index.js","chatkit.js","index.js","components/Message/index.module.css","components/MessageList/index.module.css","components/UserList/index.module.css"],"names":["module","exports","component","dots","ball-beat","pulse","UserHeader_UserHeader","_ref","_ref$user","user","react_default","a","createElement","className","index_module_default","src","avatarURL","alt","name","id","concat","UserList_UserList","room","createConvo","current","removeUser","UserList_index_module_default","users","map","key","presence","state","online","onClick","e","style","order","Message_Attachment","_this","this","props","link","fetchAttachment","url","then","fetched","setState","file","image","controls","video","audio","href","download","type","Component","Message_Message","message","sender","Message_index_module_default","string","createdAt","date","Date","minutes","getMinutes","getHours","Linkify_default","properties","target","text","attachment","emptyList","MessageList_index_module_default","empty","role","aria-label","MessageList_MessageList","_ref$messages","messages","Object","keys","length","reverse","k","TypingIndicator_index_module_default","x","TypingIndicator_TypingIndicator","_ref$typing","typing","slice","join","FileInput_FileInput","_ref$state","xlinkHref","FileInput_index_module_default","onChange","files","sendMessage","roomId","replace","CreateMessageForm_CreateMessageForm","_ref$state$user","_ref$state$room","_ref$state$message","runCommand","actions","CreateMessageForm_index_module_default","onSubmit","preventDefault","value","startsWith","placeholder","onInput","isTypingIn","unreads","arguments","undefined","read","readCursor","filter","position","RoomList_RoomList","_ref$rooms","rooms","RoomList_index_module_default","messageKeys","latestMessage","pop","firstUser","find","unreadMessages","lastMessage","parseInt","priority","unreadCount","disabled","joinRoom","match","isPrivate","TypingIndicator_index_module","RoomHeader_RoomHeader","sidebarOpen","userListOpen","_ref$actions","setSidebar","setUserList","RoomHeader_index_module_default","CreateRoomForm_CreateRoomForm","submit","CreateRoomForm_index_module_default","private","elements","checked","WelcomeScreen_WelcomeScreen","WelcomeScreen_index_module_default","viewBox","d","JoinRoomScreen_JoinRoomScreen","JoinRoomScreen_index_module_default","instanceLocator","token","src_chatkit","_ref2","chatkit_default","ChatManager","tokenProvider","TokenProvider","userId","connect","onUserStartedTyping","isTyping","onUserStoppedTyping","notTyping","onAddedToRoom","subscribeToRoom","onRemovedFromRoom","removeRoom","onUserCameOnline","setUserPresence","onUserWentOffline","Promise","all","hooks","onNewMessage","addMessage","setUser","catch","error","console","log","src_View","window","innerWidth","setRoom","scrollToEnd","setCursor","roomSubscriptions","createRoom","options","exists","addUserIds","addUserToRoom","_ref$roomId","removeUserFromRoom","_ref2$roomId","leaveRoom","setReadCursor","forceUpdate","payload","messageId","object_path_immutable","showNotification","command","commands","invite","_ref3","_slicedToArray","remove","_ref5","leave","_ref7","split","args","exec","setTimeout","elem","document","querySelector","scrollTop","senderId","visibilityState","Notification","body","icon","addEventListener","focus","_this2","requestPermission","existingUser","JSON","parse","fetch","method","stringify","code","authCode","res","json","version","package_0","localStorage","setItem","history","replaceState","location","pathname","_this$state","_this$actions","data-open","getItem","clear","redirect","URLSearchParams","search","get","react_dom_default","render"],"mappings":"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","file":"static/js/main.862af880.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"TypingIndicator_component__r4Utp\",\"dots\":\"TypingIndicator_dots__33xOB\",\"ball-beat\":\"TypingIndicator_ball-beat__Ixq6H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"JoinRoomScreen_component__3UkIA\",\"pulse\":\"JoinRoomScreen_pulse__2VTkd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"WelcomeScreen_component__2UVp_\",\"pulse\":\"WelcomeScreen_pulse__1BkDo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateRoomForm_component__1Xroe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomHeader_component__3BlbM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomList_component__2L4Kt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"FileInput_component__fvinz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateMessageForm_component__N_PsJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserHeader_component__3lvlM\",\"pulse\":\"UserHeader_pulse__3-7Ni\"};","import React from 'react'\nimport style from './index.module.css'\n\nconst placeholder =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n\nexport const UserHeader = ({ user = {} }) => (\n  <header className={style.component}>\n    <img src={user.avatarURL || placeholder} alt={user.name} />\n    <div>\n      <h3>{user.name}</h3>\n      <h5>{user.id && `@${user.id}`}</h5>\n    </div>\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const UserList = ({ room, current, createConvo, removeUser }) => (\n  <ul className={style.component}>\n    {room.users.map(user => (\n      <li\n        key={user.id}\n        className={user.presence.state === 'online' ? style.online : null}\n        onClick={e => createConvo({ user })}\n        style={{ order: user.presence.state === 'online' && -1 }}\n      >\n        <img src={user.avatarURL} alt={user.name} />\n        <p>{user.name}</p>\n      </li>\n    ))}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\nimport Linkify from 'react-linkify'\n\nconst time = string => {\n  const date = new Date(string)\n  const minutes = date.getMinutes()\n  return `${date.getHours()}:${minutes < 10 ? '0' + minutes : minutes}`\n}\n\nclass Attachment extends React.Component {\n  componentDidMount() {\n    this.props.link &&\n      this.props.user\n        .fetchAttachment({ url: this.props.link })\n        .then(fetched =>\n          this.setState({ src: fetched.link, name: fetched.file.name })\n        )\n  }\n  render() {\n    return this.state\n      ? {\n          image: (\n            <img controls={true} src={this.state.src} alt={this.state.name} />\n          ),\n          video: <video controls={true} src={this.state.src} />,\n          audio: <audio controls={true} src={this.state.src} />,\n          file: (\n            <a href={this.state.src} download>\n              Download File\n            </a>\n          ),\n        }[this.props.type]\n      : null\n  }\n}\n\nexport const Message = ({ user, createConvo }) => message =>\n  message.sender ? (\n    <li key={message.id} className={style.component}>\n      <img\n        onClick={e => createConvo({ user: message.sender })}\n        src={message.sender.avatarURL}\n        alt={message.sender.name}\n      />\n      <div>\n        <span\n          className={\n            message.sender.id === user.id ||\n            (message.sender.presence &&\n              message.sender.presence.state === 'online')\n              ? style.online\n              : null\n          }\n        >{`${message.sender.name} | ${time(message.createdAt)}`}</span>\n        <p>\n          <Linkify properties={{ target: '_blank' }}>{message.text}</Linkify>\n        </p>\n        {message.attachment ? (\n          <Attachment\n            user={user}\n            link={message.attachment.link}\n            type={message.attachment.type}\n          />\n        ) : null}\n      </div>\n    </li>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { Message } from '../Message'\n\nconst emptyList = (\n  <div className={style.empty}>\n    <span role=\"img\" aria-label=\"post\">\n      📝\n    </span>\n    <h2>No Messages Yet</h2>\n    <p>Be the first to post in this room or invite someone to join the room</p>\n  </div>\n)\n\nexport const MessageList = ({ messages = {}, user, createConvo }) => (\n  <ul id=\"messages\" className={style.component}>\n    {Object.keys(messages).length > 0 ? (\n      <wrapper->\n        {Object.keys(messages)\n          .reverse()\n          .map(k => Message({ user, createConvo })(messages[k]))}\n      </wrapper->\n    ) : (\n      emptyList\n    )}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nconst dots = (\n  <div className={style.dots}>{[0, 1, 2].map(x => <div key={x} />)}</div>\n)\n\nexport const TypingIndicator = ({ typing = {} }) =>\n  Object.keys(typing).length ? (\n    <div className={style.component}>\n      <div>{dots}</div>\n      <div>{`${Object.keys(typing)\n        .slice(0, 2)\n        .join(' and ')} is typing`}</div>\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const FileInput = ({ state: { user, message, room } }) =>\n  room.id ? (\n    <button>\n      <svg>\n        <use xlinkHref=\"index.svg#attach\" />\n      </svg>\n      <input\n        className={style.component}\n        type=\"file\"\n        onChange={e => {\n          const file = e.target.files[0]\n          file &&\n            user.sendMessage({\n              text: message || file.name,\n              roomId: room.id,\n              attachment: {\n                name: file.name.replace(/[^A-Za-z0-9._-]/g, '--'),\n                file,\n              },\n            })\n        }}\n      />\n    </button>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { FileInput } from '../FileInput'\n\nexport const CreateMessageForm = ({\n  state: { user = {}, room = {}, message = '' },\n  actions: { runCommand },\n}) =>\n  room.id ? (\n    <form\n      className={style.component}\n      onSubmit={e => {\n        e.preventDefault()\n        const message = e.target[0].value\n        e.target[0].value = ''\n        message.startsWith('/')\n          ? runCommand(message.slice(1))\n          : message.length > 0 &&\n            user.sendMessage({\n              text: message,\n              roomId: room.id,\n            })\n      }}\n    >\n      <input\n        placeholder=\"Type a Message..\"\n        onInput={e => user.isTypingIn({ roomId: room.id })}\n      />\n      <FileInput state={{ user, room, message }} />\n      <button type=\"submit\">\n        <svg>\n          <use xlinkHref=\"index.svg#send\" />\n        </svg>\n      </button>\n    </form>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { dots } from '../TypingIndicator/index.module.css'\n\nconst Icon = id => (\n  <svg>\n    <use xlinkHref={`index.svg#${id}`} />\n  </svg>\n)\n\nconst unreads = (user, room, messages = {}) => {\n  const read = user.readCursor({ roomId: room.id })\n  return (\n    (read && Object.keys(messages).filter(x => x > read.position).length) ||\n    undefined\n  )\n}\n\nconst priority = (user, room, messages = {}) => {\n  const unreadMessages = unreads(user, room, messages) || 0\n  const lastMessage = Object.keys(messages).pop() || 0\n  return (10 * unreadMessages + parseInt(lastMessage)) * -1\n}\n\nexport const RoomList = ({\n  rooms = [],\n  user,\n  messages,\n  current,\n  typing,\n  actions,\n}) => (\n  <ul className={style.component}>\n    {rooms.map(room => {\n      const messageKeys = Object.keys(messages[room.id] || {})\n      const latestMessage =\n        messageKeys.length > 0 && messages[room.id][messageKeys.pop()]\n      const firstUser = room.users.find(x => x.id !== user.id)\n      const order = priority(user, room, messages[room.id])\n      const unreadCount = unreads(user, room, messages[room.id])\n      return (\n        <li\n          key={room.id}\n          disabled={room.id === current.id}\n          onClick={e => actions.joinRoom(room)}\n          style={{ order }}\n        >\n          {room.name.match(user.id) && firstUser ? (\n            <img src={firstUser.avatarURL} alt={firstUser.id} />\n          ) : (\n            Icon(room.isPrivate ? 'lock' : 'public')\n          )}\n          <col->\n            <p>{room.name.replace(user.id, '')}</p>\n            <span>{latestMessage && latestMessage.text}</span>\n          </col->\n          {room.id !== current.id && unreadCount ? (\n            <label>{unreadCount}</label>\n          ) : Object.keys(typing[room.id] || {}).length > 0 ? (\n            <div className={dots}>{[0, 1, 2].map(x => <div key={x} />)}</div>\n          ) : null}\n        </li>\n      )\n    })}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const RoomHeader = ({\n  state: { room, user, sidebarOpen, userListOpen },\n  actions: { setSidebar, setUserList },\n}) => (\n  <header className={style.component}>\n    <button onClick={e => setSidebar(!sidebarOpen)}>\n      <svg>\n        <use xlinkHref=\"index.svg#menu\" />\n      </svg>\n    </button>\n    <h1>{room.name && room.name.replace(user.id, '')}</h1>\n    {room.users && (\n      <div onClick={e => setUserList(!userListOpen)}>\n        <span>{room.users.length}</span>\n        <svg>\n          <use xlinkHref=\"index.svg#members\" />\n        </svg>\n      </div>\n    )}\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const CreateRoomForm = ({ submit }) => (\n  <form\n    className={style.component}\n    onSubmit={e => {\n      e.preventDefault()\n      submit({\n        name: e.target[0].value,\n        private: e.target.elements[2].checked,\n      })\n      e.target[0].value = ''\n    }}\n  >\n    <input placeholder=\"Create a Room\" />\n    <button>\n      <input type=\"checkbox\" />\n      <svg>\n        <use xlinkHref=\"index.svg#lock\" />\n      </svg>\n    </button>\n    <button type=\"submit\">\n      <svg>\n        <use xlinkHref=\"index.svg#add\" />\n      </svg>\n    </button>\n  </form>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const WelcomeScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Authenticating, subscribing to rooms<br />and fetching messages.\n      </p>\n    </div>\n  </section>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const JoinRoomScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Join a room, create a room or click on a user avatar and start a\n        conversation.\n      </p>\n    </div>\n  </section>\n)\n","import Chatkit from '@pusher/chatkit'\n\nconst credentials = {\n  url: (id, token) =>\n    `https://chatkit-demo-server.herokuapp.com/token?user=${id}&token=${token}`,\n  instanceLocator: 'v1:us1:05f46048-3763-4482-9cfe-51ff327c3f29',\n}\n\nconst { instanceLocator, url } = credentials\nexport default ({ state, actions }, { id, token }) =>\n  new Chatkit.ChatManager({\n    tokenProvider: new Chatkit.TokenProvider({ url: url(id, token) }),\n    instanceLocator,\n    userId: id,\n  })\n    .connect({\n      onUserStartedTyping: actions.isTyping,\n      onUserStoppedTyping: actions.notTyping,\n      onAddedToRoom: actions.subscribeToRoom,\n      onRemovedFromRoom: actions.removeRoom,\n      onUserCameOnline: actions.setUserPresence,\n      onUserWentOffline: actions.setUserPresence,\n    })\n    .then(user => {\n      // Subscribe to all rooms the user is a member of\n      Promise.all(\n        user.rooms.map(room =>\n          user.subscribeToRoom({\n            roomId: room.id,\n            hooks: { onNewMessage: actions.addMessage },\n          })\n        )\n      ).then(rooms => {\n        actions.setUser(user)\n        // Join the first room in the users room list\n        user.rooms.length > 0 && actions.joinRoom(user.rooms[0])\n      })\n    })\n    .catch(error => console.log('Error on connection', error))\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { set, del } from 'object-path-immutable'\nimport { version } from '../package.json'\nimport './index.css'\n\nimport { UserHeader } from './components/UserHeader'\nimport { UserList } from './components/UserList'\nimport { MessageList } from './components/MessageList'\nimport { TypingIndicator } from './components/TypingIndicator'\nimport { CreateMessageForm } from './components/CreateMessageForm'\nimport { RoomList } from './components/RoomList'\nimport { RoomHeader } from './components/RoomHeader'\nimport { CreateRoomForm } from './components/CreateRoomForm'\nimport { WelcomeScreen } from './components/WelcomeScreen'\nimport { JoinRoomScreen } from './components/JoinRoomScreen'\n\nimport ChatManager from './chatkit'\n\n// --------------------------------------\n// Application\n// --------------------------------------\n\nclass View extends React.Component {\n  state = {\n    user: {},\n    room: {},\n    messages: {},\n    typing: {},\n    sidebarOpen: false,\n    userListOpen: window.innerWidth > 1000,\n  }\n\n  actions = {\n    // --------------------------------------\n    // UI\n    // --------------------------------------\n\n    setSidebar: sidebarOpen => this.setState({ sidebarOpen }),\n    setUserList: userListOpen => this.setState({ userListOpen }),\n\n    // --------------------------------------\n    // User\n    // --------------------------------------\n\n    setUser: user => this.setState({ user }),\n\n    // --------------------------------------\n    // Room\n    // --------------------------------------\n\n    setRoom: room => {\n      this.setState({ room, sidebarOpen: false })\n      this.actions.scrollToEnd()\n    },\n\n    removeRoom: room => this.setState({ room: {} }),\n\n    joinRoom: room => {\n      this.actions.setRoom(room)\n      this.actions.subscribeToRoom(room)\n      this.state.messages[room.id] &&\n        this.actions.setCursor(\n          room.id,\n          Object.keys(this.state.messages[room.id]).pop()\n        )\n    },\n\n    subscribeToRoom: room =>\n      !this.state.user.roomSubscriptions[room.id] &&\n      this.state.user.subscribeToRoom({\n        roomId: room.id,\n        hooks: { onNewMessage: this.actions.addMessage },\n      }),\n\n    createRoom: options =>\n      this.state.user.createRoom(options).then(this.actions.joinRoom),\n\n    createConvo: options => {\n      if (options.user.id !== this.state.user.id) {\n        const exists = this.state.user.rooms.find(\n          x =>\n            x.name === options.user.id + this.state.user.id ||\n            x.name === this.state.user.id + options.user.id\n        )\n        exists\n          ? this.actions.joinRoom(exists)\n          : this.actions.createRoom({\n              name: this.state.user.id + options.user.id,\n              addUserIds: [options.user.id],\n              private: true,\n            })\n      }\n    },\n\n    addUserToRoom: ({ userId, roomId = this.state.room.id }) =>\n      this.state.user\n        .addUserToRoom({ userId, roomId })\n        .then(this.actions.setRoom),\n\n    removeUserFromRoom: ({ userId, roomId = this.state.room.id }) =>\n      userId === this.state.user.id\n        ? this.state.user.leaveRoom({ roomId })\n        : this.state.user\n            .removeUserFromRoom({ userId, roomId })\n            .then(this.actions.setRoom),\n\n    // --------------------------------------\n    // Cursors\n    // --------------------------------------\n\n    setCursor: (roomId, position) =>\n      this.state.user\n        .setReadCursor({ roomId, position: parseInt(position) })\n        .then(x => this.forceUpdate()),\n\n    // --------------------------------------\n    // Messages\n    // --------------------------------------\n\n    addMessage: payload => {\n      const roomId = payload.room.id\n      const messageId = payload.id\n      // Update local message cache with new message\n      this.setState(set(this.state, ['messages', roomId, messageId], payload))\n      // Update cursor if the message was read\n      if (roomId === this.state.room.id) {\n        const cursor = this.state.user.readCursor({ roomId }) || {}\n        const cursorPosition = cursor.position || 0\n        cursorPosition < messageId && this.actions.setCursor(roomId, messageId)\n        this.actions.scrollToEnd()\n      }\n      // Send notification\n      this.actions.showNotification(payload)\n    },\n\n    runCommand: command => {\n      const commands = {\n        invite: ([userId]) => this.actions.addUserToRoom({ userId }),\n        remove: ([userId]) => this.actions.removeUserFromRoom({ userId }),\n        leave: ([userId]) =>\n          this.actions.removeUserFromRoom({ userId: this.state.user.id }),\n      }\n      const name = command.split(' ')[0]\n      const args = command.split(' ').slice(1)\n      const exec = commands[name]\n      exec && exec(args).catch(console.log)\n    },\n\n    scrollToEnd: e =>\n      setTimeout(() => {\n        const elem = document.querySelector('#messages')\n        elem && (elem.scrollTop = 100000)\n      }, 0),\n\n    // --------------------------------------\n    // Typing Indicators\n    // --------------------------------------\n\n    isTyping: (room, user) =>\n      this.setState(set(this.state, ['typing', room.id, user.id], true)),\n\n    notTyping: (room, user) =>\n      this.setState(del(this.state, ['typing', room.id, user.id])),\n\n    // --------------------------------------\n    // Presence\n    // --------------------------------------\n\n    setUserPresence: () => this.forceUpdate(),\n\n    // --------------------------------------\n    // Notifications\n    // --------------------------------------\n\n    showNotification: message => {\n      if (\n        'Notification' in window &&\n        this.state.user.id &&\n        this.state.user.id !== message.senderId &&\n        document.visibilityState === 'hidden'\n      ) {\n        const notification = new Notification(\n          `New Message from ${message.sender.id}`,\n          {\n            body: message.text,\n            icon: message.sender.avatarURL,\n          }\n        )\n        notification.addEventListener('click', e => {\n          this.actions.joinRoom(message.room)\n          window.focus()\n        })\n      }\n    },\n  }\n\n  componentDidMount() {\n    'Notification' in window && Notification.requestPermission()\n    existingUser\n      ? ChatManager(this, JSON.parse(existingUser))\n      : fetch('https://chatkit-demo-server.herokuapp.com/auth', {\n          method: 'POST',\n          body: JSON.stringify({ code: authCode }),\n        })\n          .then(res => res.json())\n          .then(user => {\n            user.version = version\n            window.localStorage.setItem('chatkit-user', JSON.stringify(user))\n            window.history.replaceState(null, null, window.location.pathname)\n            ChatManager(this, user)\n          })\n  }\n\n  render() {\n    const {\n      user,\n      room,\n      messages,\n      typing,\n      sidebarOpen,\n      userListOpen,\n    } = this.state\n    const { createRoom, createConvo, removeUserFromRoom } = this.actions\n\n    return (\n      <main>\n        <aside data-open={sidebarOpen}>\n          <UserHeader user={user} />\n          <RoomList\n            user={user}\n            rooms={user.rooms}\n            messages={messages}\n            typing={typing}\n            current={room}\n            actions={this.actions}\n          />\n          {user.id && <CreateRoomForm submit={createRoom} />}\n        </aside>\n        <section>\n          <RoomHeader state={this.state} actions={this.actions} />\n          {room.id ? (\n            <row->\n              <col->\n                <MessageList\n                  user={user}\n                  messages={messages[room.id]}\n                  createConvo={createConvo}\n                />\n                <TypingIndicator typing={typing[room.id]} />\n                <CreateMessageForm state={this.state} actions={this.actions} />\n              </col->\n              {userListOpen && (\n                <UserList\n                  room={room}\n                  current={user.id}\n                  createConvo={createConvo}\n                  removeUser={removeUserFromRoom}\n                />\n              )}\n            </row->\n          ) : user.id ? (\n            <JoinRoomScreen />\n          ) : (\n            <WelcomeScreen />\n          )}\n        </section>\n      </main>\n    )\n  }\n}\n\n// --------------------------------------\n// Authentication\n// --------------------------------------\n\nwindow.localStorage.getItem('chatkit-user') &&\n  !window.localStorage.getItem('chatkit-user').match(version) &&\n  window.localStorage.clear()\n\nconst params = new URLSearchParams(window.location.search.slice(1))\nconst authCode = params.get('code')\nconst existingUser = window.localStorage.getItem('chatkit-user')\n\nconst githubAuthRedirect = () => {\n  const client = '20cdd317000f92af12fe'\n  const url = 'https://github.com/login/oauth/authorize'\n  const server = 'https://chatkit-demo-server.herokuapp.com'\n  const redirect = `${server}/success?url=${window.location.href.split('?')[0]}`\n  window.location = `${url}?scope=user:email&client_id=${client}&redirect_uri=${redirect}`\n}\n\n!existingUser && !authCode\n  ? githubAuthRedirect()\n  : ReactDOM.render(<View />, document.querySelector('#root'))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"Message_component__2Bwls\",\"online\":\"Message_online__23_6d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"MessageList_component__2GGJY\",\"empty\":\"MessageList_empty__1Q9DK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserList_component__2slHe\",\"online\":\"UserList_online__1F6av\"};"],"sourceRoot":""}